<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pembayaran Berhasil - Ditjen Imigrasi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #003366;
            --secondary-color: #0066cc;
            --accent-color: #ffcc00;
            --text-color: #333333;
            --light-bg: #f5f5f5;
            --border-color: #dddddd;
            --success-color: #28a745;
            --warning-color: #ff6b35;
            --danger-color: #dc3545;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-bg);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
        }
        
        .header-title {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
        }
        
        .header-subtitle {
            font-size: 0.9rem;
            text-align: center;
            margin-top: 5px;
        }
        
        .content {
            flex: 1;
            padding: 20px 0;
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .card-header {
            background-color: var(--primary-color);
            color: white;
            border-radius: 10px 10px 0 0 !important;
            font-weight: bold;
            padding: 12px 15px;
        }
        
        .data-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .data-row:last-child {
            border-bottom: none;
        }
        
        .data-label {
            font-weight: 500;
        }
        
        .data-value {
            text-align: right;
            font-weight: 400;
        }
        
        .payment-amount {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        .footer {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 0;
            text-align: center;
            font-size: 0.8rem;
        }
        
        /* Success Message Styles */
        .success-container {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 2px solid var(--success-color);
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(40, 167, 69, 0.2);
        }
        
        .success-icon {
            font-size: 3rem;
            color: var(--success-color);
            margin-bottom: 15px;
            animation: checkmark 0.5s ease-in-out;
        }
        
        @keyframes checkmark {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .success-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--success-color);
            margin-bottom: 10px;
        }
        
        .success-message {
            font-size: 1.1rem;
            color: #155724;
            margin-bottom: 15px;
        }
        
        /* Warning Alert Styles */
        .warning-alert {
            background-color: #fff3cd;
            border: 2px solid var(--warning-color);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(255, 107, 53, 0.2);
        }
        
        .warning-alert::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background-color: var(--warning-color);
            animation: blink 1.5s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .warning-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .warning-icon {
            font-size: 1.8rem;
            color: var(--warning-color);
            margin-right: 15px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .warning-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--warning-color);
        }
        
        .warning-message {
            font-size: 1rem;
            color: #856404;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .btn-solve {
            background-color: var(--warning-color);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
            box-shadow: 0 4px 6px rgba(255, 107, 53, 0.3);
        }
        
        .btn-solve:hover {
            background-color: #e55a2b;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(255, 107, 53, 0.4);
            color: white;
        }
        
        .btn-upload {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
            margin-right: 10px;
            box-shadow: 0 4px 6px rgba(0, 102, 204, 0.3);
        }
        
        .btn-upload:hover {
            background-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 102, 204, 0.4);
            color: white;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
        
        .guarantee-note {
            font-size: 0.85rem;
            font-style: italic;
            color: #6c757d;
            margin-top: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 0;
            border: 1px solid #888;
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: modalopen 0.4s;
        }
        
        @keyframes modalopen {
            from {opacity: 0; transform: translateY(-30px);}
            to {opacity: 1; transform: translateY(0);}
        }
        
        .modal-header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            opacity: 0.7;
        }
        
        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin: 20px 0;
            background-color: #f8f9fa;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: var(--secondary-color);
            background-color: #e9ecef;
        }
        
        .upload-icon {
            font-size: 3rem;
            color: var(--secondary-color);
            margin-bottom: 15px;
        }
        
        .file-input {
            display: none;
        }
        
        .btn-choose-file {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-choose-file:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .file-list {
            margin-top: 20px;
        }
        
        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .file-name {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .file-size {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .btn-remove {
            background-color: var(--danger-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-remove:hover {
            background-color: #c82333;
        }
        
        .btn-submit {
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 12px 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }
        
        .btn-submit:hover {
            background-color: #218838;
        }
        
        /* Additional Payment Modal Styles */
        .additional-payment-container {
            background: linear-gradient(135deg, #fff8e1 0%, #ffe0b2 100%);
            border: 2px solid var(--accent-color);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(255, 204, 0, 0.3);
        }
        
        .additional-payment-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .additional-payment-note {
            font-size: 1rem;
            color: #856404;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .additional-payment-code-container {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px dashed var(--secondary-color);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .additional-payment-code-label {
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 10px;
            font-weight: 500;
        }
        
        .additional-payment-code {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            letter-spacing: 1px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            background-color: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .additional-copy-btn {
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 8px 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .additional-copy-btn:hover {
            background-color: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
        }
        
        .additional-countdown-container {
            background-color: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .additional-countdown {
            font-size: 1.5rem;
            font-weight: bold;
            color: #dc3545;
        }
        
        .additional-amount {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--danger-color);
            margin: 15px 0;
        }
        
        @media (max-width: 576px) {
            .action-buttons {
                flex-direction: column;
            }
            
            .btn-upload, .btn-solve {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo-container">
                <img src="https://z-cdn-media.chatglm.cn/files/2129181f-23d2-4e27-abe9-0df0ee9e8e9a.png?auth_key=1866759270-541bc735e3944f30b3066770ef5bdde9-0-9475cacbf105511be9a86ad8dd8b12b5" alt="Logo Ditjen Imigrasi" class="logo">
                <div>
                    <div class="header-title">DIREKTORAT JENDERAL IMIGRASI</div>
                    <div class="header-subtitle">KEMENTERIAN HUKUM DAN HAK ASASI MANUSIA RI</div>
                </div>
            </div>
        </div>
    </header>

    <main class="content">
        <div class="container">
            <!-- Success Message -->
            <div class="success-container">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="success-title">PEMBAYARAN BERHASIL</div>
                <div class="success-message">Terima kasih, Anda sudah berhasil melakukan pembayaran</div>
            </div>
            
            <!-- Warning Alert -->
            <div class="warning-alert">
                <div class="warning-header">
                    <div class="warning-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="warning-title">PERINGATAN SISTEM</div>
                </div>
                <div class="warning-message">
                    Mohon maaf, sistem telah mendeteksi adanya data kadaluarsa atau sudah tidak berlaku. Silahkan upload dokumen yang aktif, atau selesaikan masalah tanpa dokumen dengan cara klik tombol "Selesaikan Masalah".
                </div>
                <div class="action-buttons">
                    <button class="btn-upload" id="uploadBtn">
                        <i class="fas fa-upload"></i>
                        Upload Dokumen
                    </button>
                    <button class="btn-solve" id="solveBtn">
                        <i class="fas fa-tools"></i>
                        Selesaikan Masalah
                    </button>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-passport me-2"></i> DETAIL PENDAFTARAN PASPOR ELEKTRONIK 5 TAHUN
                </div>
                <div class="card-body">
                    <div class="data-row">
                        <div class="data-label">Kantor Imigrasi</div>
                        <div class="data-value">Kelas I Non TPI Pemalang</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Alamat</div>
                        <div class="data-value">Jl. Pramuka No. 45, Pemalang</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Nama Pemohon</div>
                        <div class="data-value">MOH ABDUL QOLID MAWARDI</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">NIK</div>
                        <div class="data-value">3328131006980005</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">No. Agency</div>
                        <div class="data-value">84638462000839</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Tgl. Pendaftaran</div>
                        <div class="data-value">26-12-2025, 21:30 WIB</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Tgl. Kedatangan</div>
                        <div class="data-value">29-12-2025, 13:30 WIB</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Status Pembayaran</div>
                        <div class="data-value">
                            <span style="color: var(--success-color); font-weight: bold;">
                                <i class="fas fa-check-circle"></i> BERHASIL
                            </span>
                        </div>
                    </div>
                    
                    <div class="guarantee-note">
                        <i class="fas fa-info-circle me-1"></i> Data pemohon ini telah dijamin sepenuhnya oleh penjamin Agency Indonesia.
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-shield-alt me-2"></i> KETENTUAN HUKUM
                </div>
                <div class="card-body">
                    <p>Pendaftaran ini dilindungi undang-undang Kementerian Hukum dan Hak Asasi Manusia sebagai pengayom masyarakat yang berlaku di Indonesia.</p>
                    <p>Semua data yang telah dimasukkan adalah benar dan dapat dipertanggungjawabkan secara hukum.</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Upload Modal -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">UPLOAD DOKUMEN</h5>
                <span class="close" id="closeUploadModal">&times;</span>
            </div>
            <div class="modal-body">
                <p>Silahkan upload dokumen yang masih berlaku untuk melanjutkan proses:</p>
                
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <p>Drag & drop file di sini atau</p>
                    <input type="file" id="fileInput" class="file-input" multiple>
                    <button class="btn-choose-file" id="chooseFileBtn">Pilih File</button>
                    <p style="margin-top: 10px; color: #6c757d; font-size: 0.9rem;">
                        Format: PDF, JPG, PNG (Maks. 5MB)
                    </p>
                </div>
                
                <div class="file-list" id="fileList"></div>
                
                <button class="btn-submit" id="submitFiles">
                    <i class="fas fa-paper-plane me-2"></i> KIRIM DOKUMEN
                </button>
            </div>
        </div>
    </div>

    <!-- Solve Problem Modal -->
    <div id="solveModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">SELESAIKAN MASALAH</h5>
                <span class="close" id="closeSolveModal">&times;</span>
            </div>
            <div class="modal-body">
                <p>Anda memilih untuk menyelesaikan masalah tanpa mengupload dokumen. Sistem akan memproses permohonan Anda dengan data yang tersedia.</p>
                
                <div class="alert alert-warning" role="alert">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>Perhatian:</strong> Menyelesaikan masalah tanpa dokumen dapat mempengaruhi proses verifikasi dan persetujuan permohonan Anda.
                </div>
                
                <p>Apakah Anda yakin ingin melanjutkan tanpa mengupload dokumen?</p>
                
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button class="btn btn-secondary" style="flex: 1;" id="cancelSolve">
                        <i class="fas fa-times me-2"></i> BATAL
                    </button>
                    <button class="btn btn-warning" style="flex: 1;" id="confirmSolve">
                        <i class="fas fa-check me-2"></i> LANJUTKAN
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Additional Payment Modal -->
    <div id="additionalPaymentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">PEMBAYARAN TAMBAHAN</h5>
                <span class="close" id="closeAdditionalPaymentModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="additional-payment-container">
                    <div class="additional-payment-title">
                        <i class="fas fa-exclamation-circle me-2"></i> PEMBAYARAN WAJIB
                    </div>
                    <div class="additional-payment-note">
                        Untuk menyelesaikan masalah tanpa dokumen, Anda wajib membayar beban tambahan sesuai dengan peraturan yang berlaku.
                    </div>
                    
                    <div class="additional-payment-code-container">
                        <div class="additional-payment-code-label">KODE PEMBAYARAN TAMBAHAN</div>
                        <div class="additional-payment-code" id="additionalPaymentCode">910266000001741127</div>
                        <button class="additional-copy-btn" id="additionalCopyBtn">
                            <i class="fas fa-copy"></i>
                            <span id="additionalCopyBtnText">SALIN KODE</span>
                        </button>
                    </div>
                    
                    <div class="additional-amount">Rp 353.500,00</div>
                    
                    <div class="additional-countdown-container">
                        <div>Batas Waktu Pembayaran</div>
                        <div class="additional-countdown" id="additionalCountdown">01:59:59</div>
                    </div>
                    
                    <div class="alert alert-danger" role="alert">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Penting:</strong> Pembayaran tambahan harus dilakukan dalam batas waktu yang ditentukan. Jika tidak, permohonan akan ditolak secara otomatis.
                    </div>
                    
                    <button class="btn btn-danger" style="width: 100%;" id="payAdditionalBtn">
                        <i class="fas fa-credit-card me-2"></i> BAYAR SEKARANG
                    </button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Direktorat Jenderal Imigrasi - Kementerian Hukum dan Hak Asasi Manusia Republik Indonesia</p>
            <p>Hak Cipta Dilindungi Undang-Undang</p>
        </div>
    </footer>

    <script>
        // Upload Modal
        const uploadModal = document.getElementById("uploadModal");
        const uploadBtn = document.getElementById("uploadBtn");
        const closeUploadModal = document.getElementById("closeUploadModal");
        const uploadArea = document.getElementById("uploadArea");
        const fileInput = document.getElementById("fileInput");
        const chooseFileBtn = document.getElementById("chooseFileBtn");
        const fileList = document.getElementById("fileList");
        const submitFiles = document.getElementById("submitFiles");
        
        // Solve Modal
        const solveModal = document.getElementById("solveModal");
        const solveBtn = document.getElementById("solveBtn");
        const closeSolveModal = document.getElementById("closeSolveModal");
        const cancelSolve = document.getElementById("cancelSolve");
        const confirmSolve = document.getElementById("confirmSolve");
        
        // Additional Payment Modal
        const additionalPaymentModal = document.getElementById("additionalPaymentModal");
        const closeAdditionalPaymentModal = document.getElementById("closeAdditionalPaymentModal");
        const additionalCopyBtn = document.getElementById("additionalCopyBtn");
        const additionalCopyBtnText = document.getElementById("additionalCopyBtnText");
        const additionalPaymentCode = "910266000001741127";
        const payAdditionalBtn = document.getElementById("payAdditionalBtn");
        
        // File upload functionality
        let uploadedFiles = [];
        
        uploadBtn.onclick = function() {
            uploadModal.style.display = "block";
        }
        
        closeUploadModal.onclick = function() {
            uploadModal.style.display = "none";
        }
        
        chooseFileBtn.onclick = function() {
            fileInput.click();
        }
        
        uploadArea.onclick = function() {
            fileInput.click();
        }
        
        uploadArea.ondragover = function(e) {
            e.preventDefault();
            uploadArea.style.backgroundColor = "#e9ecef";
        }
        
        uploadArea.ondragleave = function() {
            uploadArea.style.backgroundColor = "#f8f9fa";
        }
        
        uploadArea.ondrop = function(e) {
            e.preventDefault();
            uploadArea.style.backgroundColor = "#f8f9fa";
            handleFiles(e.dataTransfer.files);
        }
        
        fileInput.onchange = function() {
            handleFiles(this.files);
        }
        
        function handleFiles(files) {
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const fileSize = (file.size / 1024 / 1024).toFixed(2);
                
                if (fileSize > 5) {
                    alert(`File ${file.name} terlalu besar. Maksimal ukuran file adalah 5MB.`);
                    continue;
                }
                
                uploadedFiles.push({
                    name: file.name,
                    size: fileSize,
                    file: file
                });
                
                addFileToList(file.name, fileSize, uploadedFiles.length - 1);
            }
        }
        
        function addFileToList(name, size, index) {
            const fileItem = document.createElement("div");
            fileItem.className = "file-item";
            fileItem.innerHTML = `
                <div class="file-name">
                    <i class="fas fa-file"></i>
                    <div>
                        <div>${name}</div>
                        <div class="file-size">${size} MB</div>
                    </div>
                </div>
                <button class="btn-remove" data-index="${index}">
                    <i class="fas fa-times"></i>
                </button>
            `;
            fileList.appendChild(fileItem);
            
            // Add event listener to remove button
            fileItem.querySelector(".btn-remove").onclick = function() {
                const idx = parseInt(this.getAttribute("data-index"));
                uploadedFiles.splice(idx, 1);
                fileItem.remove();
                
                // Update indices
                const removeButtons = document.querySelectorAll(".btn-remove");
                removeButtons.forEach((btn, i) => {
                    btn.setAttribute("data-index", i);
                });
            };
        }
        
        submitFiles.onclick = function() {
            if (uploadedFiles.length === 0) {
                alert("Silahkan pilih file terlebih dahulu.");
                return;
            }
            
            // Simulate file upload
            submitFiles.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Mengupload...';
            submitFiles.disabled = true;
            
            setTimeout(() => {
                alert("Dokumen berhasil diupload! Sistem akan memproses dokumen Anda.");
                uploadModal.style.display = "none";
                submitFiles.innerHTML = '<i class="fas fa-paper-plane me-2"></i> KIRIM DOKUMEN';
                submitFiles.disabled = false;
                
                // Clear file list
                fileList.innerHTML = "";
                uploadedFiles = [];
                fileInput.value = "";
            }, 2000);
        }
        
        // Solve problem functionality
        solveBtn.onclick = function() {
            solveModal.style.display = "block";
        }
        
        closeSolveModal.onclick = function() {
            solveModal.style.display = "none";
        }
        
        cancelSolve.onclick = function() {
            solveModal.style.display = "none";
        }
        
        confirmSolve.onclick = function() {
            solveModal.style.display = "none";
            // Show additional payment modal instead of alert
            additionalPaymentModal.style.display = "block";
        }
        
        // Additional payment modal functionality
        closeAdditionalPaymentModal.onclick = function() {
            additionalPaymentModal.style.display = "none";
        }
        
        // Copy functionality for additional payment code
        additionalCopyBtn.onclick = function() {
            copyToClipboard(additionalPaymentCode);
            additionalCopyBtnText.textContent = "TERSALIN!";
            setTimeout(() => {
                additionalCopyBtnText.textContent = "SALIN KODE";
            }, 2000);
        }
        
        function copyToClipboard(text) {
            // Create a temporary textarea element
            const textarea = document.createElement("textarea");
            textarea.value = text;
            textarea.style.position = "fixed";
            textarea.style.opacity = "0";
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                const successful = document.execCommand("copy");
                if (!successful) {
                    // Fallback for modern browsers
                    navigator.clipboard.writeText(text).then(() => {
                        console.log("Copied to clipboard successfully");
                    }).catch(err => {
                        console.error("Failed to copy: ", err);
                    });
                }
            } catch (err) {
                console.error("Failed to copy: ", err);
                // Fallback for modern browsers
                navigator.clipboard.writeText(text).then(() => {
                    console.log("Copied to clipboard successfully");
                }).catch(err => {
                    console.error("Failed to copy: ", err);
                });
            }
            
            document.body.removeChild(textarea);
        }
        
        // Pay additional button
        payAdditionalBtn.onclick = function() {
            payAdditionalBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Memproses...';
            payAdditionalBtn.disabled = true;
            
            setTimeout(() => {
                alert("Pembayaran tambahan sedang diproses. Anda akan diarahkan ke halaman pembayaran.");
                additionalPaymentModal.style.display = "none";
                payAdditionalBtn.innerHTML = '<i class="fas fa-credit-card me-2"></i> BAYAR SEKARANG';
                payAdditionalBtn.disabled = false;
            }, 2000);
        }
        
        // Additional Countdown Timer
        let additionalCountdownTime = 7200; // 2 hours in seconds
        
        function updateAdditionalCountdown() {
            const hours = Math.floor(additionalCountdownTime / 3600);
            const minutes = Math.floor((additionalCountdownTime % 3600) / 60);
            const seconds = additionalCountdownTime % 60;
            
            const formattedTime = 
                (hours < 10 ? "0" : "") + hours + ":" +
                (minutes < 10 ? "0" : "") + minutes + ":" +
                (seconds < 10 ? "0" : "") + seconds;
            
            document.getElementById("additionalCountdown").textContent = formattedTime;
            
            if (additionalCountdownTime > 0) {
                additionalCountdownTime--;
            } else {
                document.getElementById("additionalCountdown").textContent = "Waktu Habis";
                payAdditionalBtn.disabled = true;
                payAdditionalBtn.textContent = "PEMBAYARAN DITOLAK";
                payAdditionalBtn.style.backgroundColor = "#6c757d";
            }
        }
        
        // Update additional countdown every second
        setInterval(updateAdditionalCountdown, 1000);
        updateAdditionalCountdown(); // Initial call
        
        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target == uploadModal) {
                uploadModal.style.display = "none";
            }
            if (event.target == solveModal) {
                solveModal.style.display = "none";
            }
            if (event.target == additionalPaymentModal) {
                additionalPaymentModal.style.display = "none";
            }
        }
    </script>
</body>
</html>
